name: Sync to Google Drive
on:
  push:
    branches: [ main ]
jobs:
  upload:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Zip Project
        run: zip -r production_app.zip . -x ".git*"
      - uses: google-github-actions/auth@v2
        with:
          credentials_json: ${{ secrets.GDRIVE_SERVICE_ACCOUNT_JSON }}
      - uses: google-github-actions/upload-cloud-storage@v2 # 代わりに公式に近い安定版を使用
        with:
          path: 'production_app.zip'
          destination: 'ProductionApp' # フォルダ名を直接指定する方式
